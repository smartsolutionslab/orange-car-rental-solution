<div class="similar-vehicles-container">
  <!-- Unavailability Warning -->
  @if (showUnavailableWarning() && currentVehicle()) {
    <div class="unavailable-warning">
      <lib-icon name="alert-triangle" variant="outline" size="lg" class="warning-icon" />
      <div class="warning-content">
        <h3 class="warning-title">{{ 'similarVehicles.unavailable.title' | translate }}</h3>
        <p class="warning-text">
          {{
            'similarVehicles.unavailable.message' | translate: { vehicle: currentVehicle()!.name }
          }}
        </p>
      </div>
    </div>
  }

  <!-- Header -->
  @if (!showUnavailableWarning()) {
    <div class="section-header">
      <h2 class="section-title">{{ 'similarVehicles.title' | translate }}</h2>
      <p class="section-subtitle">{{ 'similarVehicles.subtitle' | translate }}</p>
    </div>
  }

  <!-- Similar Vehicles Grid -->
  @if (similarVehicles().length > 0) {
    <div class="vehicles-grid">
      @for (vehicle of similarVehicles(); track vehicle.id) {
        <ocr-vehicle-card
          [vehicle]="vehicle"
          variant="similar"
          [showLocation]="false"
          [showPriceComparison]="true"
          [comparisonVehicle]="currentVehicle()"
          [similarityReason]="getSimilarityReason(vehicle)"
          [actionLabel]="'similarVehicles.bookInstead' | translate"
          (action)="selectVehicle($event)"
        />
      }
    </div>
  } @else {
    <div class="no-vehicles">
      <lib-icon name="emoji-sad" variant="outline" size="xl" class="no-vehicles-icon" />
      <p>{{ 'similarVehicles.noResults' | translate }}</p>
    </div>
  }
</div>
